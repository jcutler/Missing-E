#!/bin/bash
FIREFOX=0
SAFARI=0
CHROME=0
UPLOAD=""

if [[ "$1" == "-noupload" ]]; then
   UPLOAD="-noupload"
   shift
elif [[ "$1" == "--noupload" ]]; then
   UPLOAD="-noupload"
   shift
elif [[ "$1" == "--no-upload" ]]; then
   UPLOAD="-noupload"
   shift
fi   

until [ -z "$1" ]
do
   ARG=`echo $1 | tr '[A-Z]' '[a-z]'`
   case "$ARG" in
      "all" )
         FIREFOX=1
         SAFARI=1
         CHROME=1
         ;;
      "f" | "ff" | "firefox" )
         FIREFOX=1
         ;;
      "s" | "safari" )
         SAFARI=1
         ;;
      "c" | "c" | "chrome" )
         CHROME=1
         ;;
      * )
         echo "Invalid parameter: $1"
         exit 1
         ;;
   esac
   shift
done

if [[ "$CHROME" -eq "1" ]]; then
   echo "Building Chrome Extension"
   ./buildChrome.sh $UPLOAD > /dev/null
fi
if [[ "$FIREFOX" -eq "1" ]]; then
   echo "Building Firefox Add-On"
   ./buildFirefox.sh $UPLOAD > /dev/null
fi
if [[ "$SAFARI" -eq "1" ]]; then
   echo "Uploading Safari Extension"
   ./uploadSafari.sh $UPLOAD
fi
if [[ "$UPLOAD" -eq "" ]]; then
   echo "Changing site version info"
   ./changeSiteVersion.sh
fi
